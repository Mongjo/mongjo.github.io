---
title: 메모리 관리 (명품_운영체제 Ch 08)
categories:
  - operating-system
date: 2025-02-20
root-url: ../
permalink: /categories/operating-system/2025/02/20
---
### 메모리 계층 구조
메모리
시스템 내의 모든 기억 공간을 포괄적으로 부르는 말(일반적으로는 메인 메모리를 가리키긴 한다)
실행될 프로그램의 코드와 데이터가 적재되며, 실행 중 발생하는 데이터가 저장된다

- 메모리 계층 구조
![](/assets/images/posts_img/screen_capture%202025-02-13%2010.23.31.png)

CPU레지스터, 캐시 메모리, 메인 메모리, 보조 기억 장치 순으로 계층 구조를 이룬다
- 이를 메모리 계층 구조라고 부른다
- CPU의 메모리 엑세스 시간을 줄이기 위함이다
- 계층 구조의 중심에 메인 메모리(RAM)이 존재한다
- 하드 디스크 쪽으로 갈수록 용량이 커지고, 가격이 싸지며, 처리 속도는 느려진다


##### 메모리 계층 구조의 요소
CPU 레지스터(CPU registers)
- 현재 실행할 코드와 데이터, 혹은 다음에 실행할 몇 개의 코드와 데이터를 미리 저장한다
- 레지스터의 크기와 개수는 CPU 종류에 따라 다르며, 일반적으로 8~30개 정도가 있다

캐시 메모리(cache memory)
- CPU 칩 내부의 `on-chip 캐시`와 CPU 바깥의 `off-chip 캐시`로 나뉘며, CPU가 실행할 프로세스 정보 중에서 당장 실행할 일부를 메인 메모리에서 미리 복사해서 사용한다
	- 코어마다 L1/L2 , L3이라는 이름의 캐시를 둔다
	- 현대에서 L1~L3는 on-chip 캐시, L4는 off-chip 캐시이며, L4 캐시는 고성능 시스템(서버, 워크스테이션)에 사용된다
	- L1~L4까지 순서대로 L1 캐시가 가장 빠르고, L4 캐시가 가장 느리다
- 사용자 프로그램과 운영체제 커널을 구분하지 않고 당장 필요한 코드 및 데이터를 복사한다
- 가격이 비싸서 소량만 사용되는 대신에 메인 메모리보다 빠른 속도를 가지며, CPU와 메인 메모리의 속도 차이에서 오는 `메모리 엑세스 시간`을 단축시키기 위해 도입되었다

메인 메모리(main memory, RAM)
- 일반적으로 '메모리'라는 단어가 가리키는 메모리로, `RAM`이라고 부른다
- 현재 실행 중인 모든 프로세스의 코드 및 데이터, 접근한 파일들의 블록, 운영체제의 커널 코드와 커널 데이터 등이 저장된다
- 휘발성 저장장치로, 컴퓨터 시스템의 전원이 꺼지면 저장된 내용이 모두 사라진다

보조기억장치(secondary memory)
- 비휘발성 저장장치로, 전원을 꺼도 내용이 지워지지 않는 대용량 저장장치이다(ex 하드 디스크, SSD)
- 메인 메모리의 크기 한계로 인해 실행 프로그램의 코드와 데이터를 적재할 공간이 필요할 때 일시 저장하는 용도(스왑 메모리)로도 사용된다


|     |            CPU 레지스터            |             L1/L2 캐시              |            L3 캐시            |                  메인 메모리                   |                    보조 기억 장치                    |
| :-: | :----------------------------: | :-------------------------------: | :-------------------------: | :---------------------------------------: | :--------------------------------------------: |
| 용도  |        몇 개의 명령과 데이터 저장         |      한 코어에서 실행되는 명령과 데이터 저장       | 멀티 코어들에 의해 공유<br>명령과 데이터 저장 | 실행 중인 전체 프로세스들의 코드와 데이터, 입출력 중인 파일 블록들 저장 | 파일이나 데이터베이스, 그리고 메모리에 적재된 프로세스의 코드와 데이터의 일시 저장 |
| 옹량  | 바이트 단위,<br>8~30개 정도,<br>1KB 미만 | KB 단위<br>(Core i7의 경우 32KB/256KB) | MB 단위<br>(Core i7의 경우 8MB)  |      GB 단위<br>(최근 PC의 경우 최소 8GB 이상)       |                     TB 단위                      |
| 타입  |                                |       SRAM<br>(Static RAM)        |    SRAM<br>(Static RAM)     |           DRAM<br>(Dynamic RAM)           |                마그네틱 필드나 플래시 메모리                |
| 속도  |             < 1ns              |               < 5ns               |            < 5ns            |                  < 50ns                   |                     < 20ms                     |
| 가격  |                                |                고가                 |             고가              |                    보통                     |                       저가                       |
| 휘발성 |              휘발성               |                휘발성                |             휘발성             |                    휘발성                    |                      비휘발성                      |



